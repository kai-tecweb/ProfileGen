import{b,r as c,u as f,j as e,H as N,a as v}from"./app-7qfK9I34.js";import{A as y}from"./AuthenticatedLayout-Bq2xJ5dz.js";import{s as w}from"./index-ikzcNs2d.js";import{B as q}from"./Button-BA9Tpm1N.js";import{L as S}from"./LoadingSpinner-BZkVDNAl.js";import"./ApplicationLogo-ii1LrI5Z.js";import"./transition-BUtyYROC.js";function R({consultations:a}){const d=b(),r=d.props.flash||{},[t,n]=c.useState(a),[i,l]=c.useState(!1);c.useEffect(()=>{n(a);const s=d.props.existing_consultation;s&&(t.some(g=>g.id===s.id)||n([s,...t]))},[a,d.props]);const{data:x,setData:m,post:h,processing:u,errors:o,reset:p}=f({question:""}),j=s=>{s.preventDefault(),l(!0),h(w("consultations.store"),{preserveScroll:!0,onSuccess:()=>{p(),l(!1),v.reload({only:["consultations"]})},onError:()=>{l(!1)},onFinish:()=>{l(!1)}})};return e.jsxs(y,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"相談チャット"}),children:[e.jsx(N,{title:"相談チャット"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"今どんな状態ですか？何をオズに相談したいですか？"}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"例えば、"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1 mb-3",children:[e.jsx("li",{children:"どんな商品を出せばいいかわからない"}),e.jsx("li",{children:"商品案をなんとなく思いついているけどどう進めればいいかわからない"}),e.jsx("li",{children:"競合リサーチや商品設計が思い浮かばない"}),e.jsx("li",{children:"どんな商品ならどれくらいの売り上げが見込めるのかリサーチしてもわからない"}),e.jsx("li",{children:"プロフや商品説明が作れない"}),e.jsx("li",{children:"サムネや画像類のアイディアが思いつかない"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:"など、ざっくばらんにご相談ください！"})]}),e.jsx("div",{className:"mb-6 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"※同じ質問をされた場合は、過去に同じ質問をした方と同じ回答が返ってきますのでご注意ください"})}),e.jsxs("form",{onSubmit:j,className:"mb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700 mb-2",children:"ご質問"}),e.jsx("textarea",{id:"question",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:10,value:x.question,onChange:s=>m("question",s.target.value),required:!0,placeholder:"ご質問を入力してください"}),o.question&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.question})]}),r?.warning&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm text-yellow-800",children:r.warning})]}),r?.success&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("span",{className:"text-sm text-green-800",children:r.success})}),r?.error&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("span",{className:"text-sm text-red-800",children:r.error})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{type:"submit",disabled:u||i,children:i?"回答を生成中...":"送信"})}),i&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(S,{message:"回答を生成しています..."})})]}),t.length>0&&e.jsxs("div",{className:"mt-8 border-t pt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"相談履歴"}),e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"max-w-2xl bg-blue-100 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:s.question}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-right",children:new Date(s.created_at).toLocaleString("ja-JP")})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"max-w-2xl bg-gray-100 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:s.answer}),s.is_corrected&&e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"※この回答は修正されています"})]})})]},s.id))})]})]})})})})]})}export{R as default};
