import{j as e,L as A,b as B,r as N,u as H,H as R,a as G}from"./app-7qfK9I34.js";import{s as w}from"./index-ikzcNs2d.js";import{B as L}from"./Button-BA9Tpm1N.js";import{L as I}from"./LoadingSpinner-BZkVDNAl.js";import{M as p,r as u,h as j,v as b}from"./vsc-dark-plus-BpWSbEI3.js";function J({header:c,children:x}){return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("nav",{className:"border-b border-gray-100 bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex h-16 justify-between",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex shrink-0 items-center",children:e.jsx("span",{className:"text-xl font-bold text-gray-800",children:"ProfileGen - Â≠¶Áîü„Ç®„É™„Ç¢"})}),e.jsx("div",{className:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex",children:e.jsx(A,{href:w("student.consultations.index"),className:"inline-flex items-center px-1 pt-1 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out",children:"Áõ∏Ë´á„ÉÅ„É£„ÉÉ„Éà"})})]}),e.jsx("div",{className:"hidden sm:ms-6 sm:flex sm:items-center",children:e.jsx("form",{method:"POST",action:w("student.logout"),children:e.jsx(L,{type:"submit",variant:"secondary",children:"„É≠„Ç∞„Ç¢„Ç¶„Éà"})})})]})})}),c&&e.jsx("header",{className:"bg-white shadow",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:c})}),e.jsx("main",{children:x})]})}function W({consultations:c,new_consultation:x}){const i=B().props.flash||{},[S,P]=N.useState(c),[f,y]=N.useState(!1),[k,M]=N.useState({});N.useEffect(()=>{P(c),x&&(c.some(o=>o.id===x.id)||P([x,...c]))},[c,x]);const{data:$,setData:E,post:T,processing:F,errors:q,reset:_}=H({question:""}),D=r=>{r.preventDefault(),y(!0),T(w("student.consultations.store"),{preserveScroll:!0,onSuccess:()=>{_(),y(!1),G.reload({only:["consultations"]})},onError:()=>{y(!1)},onFinish:()=>{y(!1)}})},z=r=>{const o=r.match(/„ÄêË¶ÅÁ¥Ñ„Äë\s*([\s\S]*?)(?=„Äê‰ªä„Åô„Åê„ÇÑ„Çã„Åì„Å®„Äë|„Äê„Ç¢„Éâ„Éê„Ç§„Çπ„Äë|„ÄêË©≥Á¥∞„Äë|$)/),m=r.match(/„Äê‰ªä„Åô„Åê„ÇÑ„Çã„Åì„Å®„Äë\s*([\s\S]*?)(?=„Äê„Ç¢„Éâ„Éê„Ç§„Çπ„Äë|„ÄêË©≥Á¥∞„Äë|$)/),h=r.match(/„Äê„Ç¢„Éâ„Éê„Ç§„Çπ„Äë\s*([\s\S]*?)(?=„ÄêË©≥Á¥∞„Äë|$)/),g=r.match(/„ÄêË©≥Á¥∞„Äë\s*([\s\S]*)/);return{summary:o?o[1].trim():"",action:m?m[1].trim():"",advice:h?h[1].trim():"",detail:g?g[1].trim():r}};return e.jsxs(J,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Áõ∏Ë´á„ÉÅ„É£„ÉÉ„Éà"}),children:[e.jsx(R,{title:"Áõ∏Ë´á„ÉÅ„É£„ÉÉ„Éà"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"‰ªä„Å©„Çì„Å™Áä∂ÊÖã„Åß„Åô„ÅãÔºü‰Ωï„Çí„Ç™„Ç∫„Å´Áõ∏Ë´á„Åó„Åü„ÅÑ„Åß„Åô„ÅãÔºü"}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"‰æã„Åà„Å∞„ÄÅ"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1 mb-3",children:[e.jsx("li",{children:"„Å©„Çì„Å™ÂïÜÂìÅ„ÇíÂá∫„Åõ„Å∞„ÅÑ„ÅÑ„Åã„Çè„Åã„Çâ„Å™„ÅÑ"}),e.jsx("li",{children:"ÂïÜÂìÅÊ°à„Çí„Å™„Çì„Å®„Å™„ÅèÊÄù„ÅÑ„Å§„ÅÑ„Å¶„ÅÑ„Çã„Åë„Å©„Å©„ÅÜÈÄ≤„ÇÅ„Çå„Å∞„ÅÑ„ÅÑ„Åã„Çè„Åã„Çâ„Å™„ÅÑ"}),e.jsx("li",{children:"Á´∂Âêà„É™„Çµ„Éº„ÉÅ„ÇÑÂïÜÂìÅË®≠Ë®à„ÅåÊÄù„ÅÑÊµÆ„Åã„Å∞„Å™„ÅÑ"}),e.jsx("li",{children:"„Å©„Çì„Å™ÂïÜÂìÅ„Å™„Çâ„Å©„Çå„Åè„Çâ„ÅÑ„ÅÆÂ£≤„Çä‰∏ä„Åí„ÅåË¶ãËæº„ÇÅ„Çã„ÅÆ„Åã„É™„Çµ„Éº„ÉÅ„Åó„Å¶„ÇÇ„Çè„Åã„Çâ„Å™„ÅÑ"}),e.jsx("li",{children:"„Éó„É≠„Éï„ÇÑÂïÜÂìÅË™¨Êòé„Åå‰Ωú„Çå„Å™„ÅÑ"}),e.jsx("li",{children:"„Çµ„É†„Éç„ÇÑÁîªÂÉèÈ°û„ÅÆ„Ç¢„Ç§„Éá„Ç£„Ç¢„ÅåÊÄù„ÅÑ„Å§„Åã„Å™„ÅÑ"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:"„Å™„Å©„ÄÅ„Åñ„Å£„Åè„Å∞„Çâ„Çì„Å´„ÅîÁõ∏Ë´á„Åè„Å†„Åï„ÅÑÔºÅ"})]}),e.jsx("div",{className:"mb-6 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"‚ÄªÂêå„ÅòË≥™Âïè„Çí„Åï„Çå„ÅüÂ†¥Âêà„ÅØ„ÄÅÈÅéÂéª„Å´Âêå„ÅòË≥™Âïè„Çí„Åó„ÅüÊñπ„Å®Âêå„ÅòÂõûÁ≠î„ÅåËøî„Å£„Å¶„Åç„Åæ„Åô„ÅÆ„Åß„ÅîÊ≥®ÊÑè„Åè„Å†„Åï„ÅÑ"})}),e.jsxs("form",{onSubmit:D,className:"mb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700 mb-2",children:"„ÅîË≥™Âïè"}),e.jsx("textarea",{id:"question",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:10,value:$.question,onChange:r=>E("question",r.target.value),required:!0,placeholder:"„ÅîË≥™Âïè„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"}),q.question&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.question})]}),i?.warning&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm text-yellow-800",children:i.warning})]}),i?.success&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("span",{className:"text-sm text-green-800",children:i.success})}),i?.error&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("span",{className:"text-sm text-red-800",children:i.error})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(L,{type:"submit",disabled:F||f,children:f?"ÂõûÁ≠î„ÇíÁîüÊàê‰∏≠...":"ÈÄÅ‰ø°"})}),f&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(I,{message:"ÂõûÁ≠î„ÇíÁîüÊàê„Åó„Å¶„ÅÑ„Åæ„Åô..."})})]}),S.length>0&&e.jsxs("div",{className:"mt-8 border-t pt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Áõ∏Ë´áÂ±•Ê≠¥"}),e.jsx("div",{className:"space-y-4",children:S.map(r=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"max-w-2xl bg-blue-100 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:r.question}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-right",children:new Date(r.created_at).toLocaleString("ja-JP")})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"max-w-2xl bg-gray-100 rounded-lg p-4",children:(()=>{const{summary:o,action:m,advice:h,detail:g}=z(r.answer),v=k[r.id]||!1;return e.jsxs(e.Fragment,{children:[o&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"flex items-center mb-1",children:e.jsx("span",{className:"font-bold text-sm text-blue-600",children:"üí° Ë¶ÅÁ¥Ñ"})}),e.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-h1:text-xl prose-h2:text-lg prose-h3:text-base prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900",children:e.jsx(p,{remarkPlugins:[u],components:{ul:({node:n,...s})=>e.jsx("ul",{className:"space-y-2 my-2",...s}),li:({node:n,...s})=>e.jsx("li",{className:"my-2",...s}),code({node:n,inline:s,className:d,children:t,...a}){const l=/language-(\w+)/.exec(d||"");return!s&&l?e.jsx(j,{style:b,language:l[1],PreTag:"div",...a,children:String(t).replace(/\n$/,"")}):e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-sm",...a,children:t})}},children:o})})]}),m&&e.jsxs("div",{className:"mb-3 bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded",children:[e.jsx("div",{className:"flex items-center mb-1",children:e.jsx("span",{className:"font-bold text-sm text-yellow-700",children:"‚úÖ ‰ªä„Åô„Åê„ÇÑ„Çã„Åì„Å®"})}),e.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-h1:text-xl prose-h2:text-lg prose-h3:text-base prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900",children:e.jsx(p,{remarkPlugins:[u],components:{ul:({node:n,...s})=>e.jsx("ul",{className:"space-y-2 my-2",...s}),li:({node:n,...s})=>e.jsx("li",{className:"my-2",...s}),code({node:n,inline:s,className:d,children:t,...a}){const l=/language-(\w+)/.exec(d||"");return!s&&l?e.jsx(j,{style:b,language:l[1],PreTag:"div",...a,children:String(t).replace(/\n$/,"")}):e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-sm",...a,children:t})}},children:m})})]}),h&&e.jsxs("div",{className:"mb-3 bg-green-50 border-l-4 border-green-400 p-3 rounded",children:[e.jsx("div",{className:"flex items-center mb-1",children:e.jsx("span",{className:"font-bold text-sm text-green-700",children:"üí¨ „Ç¢„Éâ„Éê„Ç§„Çπ"})}),e.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-h1:text-xl prose-h2:text-lg prose-h3:text-base prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900",children:e.jsx(p,{remarkPlugins:[u],components:{ul:({node:n,...s})=>e.jsx("ul",{className:"space-y-2 my-2",...s}),li:({node:n,...s})=>e.jsx("li",{className:"my-2",...s}),code({node:n,inline:s,className:d,children:t,...a}){const l=/language-(\w+)/.exec(d||"");return!s&&l?e.jsx(j,{style:b,language:l[1],PreTag:"div",...a,children:String(t).replace(/\n$/,"")}):e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-sm",...a,children:t})}},children:h})})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>M({...k,[r.id]:!v}),className:"text-blue-600 text-sm hover:underline mb-2 flex items-center",children:v?"Ë©≥Á¥∞„ÇíÈñâ„Åò„Çã ‚ñ≤":"Ë©≥„Åó„ÅèË¶ã„Çã ‚ñº"}),v&&e.jsxs("div",{className:"mt-2 pt-3 border-t border-gray-300",children:[e.jsx("div",{className:"flex items-center mb-1",children:e.jsx("span",{className:"font-bold text-sm text-gray-600",children:"üìñ Ë©≥Á¥∞"})}),e.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-h1:text-xl prose-h2:text-lg prose-h3:text-base prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900",children:e.jsx(p,{remarkPlugins:[u],components:{code({node:n,inline:s,className:d,children:t,...a}){const l=/language-(\w+)/.exec(d||"");return!s&&l?e.jsx(j,{style:b,language:l[1],PreTag:"div",...a,children:String(t).replace(/\n$/,"")}):e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-sm",...a,children:t})}},children:g})})]})]}),!o&&!m&&!h&&!g&&e.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-h1:text-xl prose-h2:text-lg prose-h3:text-base prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900",children:e.jsx(p,{remarkPlugins:[u],components:{code({node:n,inline:s,className:d,children:t,...a}){const l=/language-(\w+)/.exec(d||"");return!s&&l?e.jsx(j,{style:b,language:l[1],PreTag:"div",...a,children:String(t).replace(/\n$/,"")}):e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-sm",...a,children:t})}},children:r.answer})}),r.is_corrected&&e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"‚Äª„Åì„ÅÆÂõûÁ≠î„ÅØ‰øÆÊ≠£„Åï„Çå„Å¶„ÅÑ„Åæ„Åô"})]})})()})})]},r.id))})]})]})})})})]})}export{W as default};
