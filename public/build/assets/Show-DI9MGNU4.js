import{r as n,j as e,H as g,L as c,a as x}from"./app-7qfK9I34.js";import{A as f}from"./AuthenticatedLayout-Bq2xJ5dz.js";import{s as t}from"./index-ikzcNs2d.js";import{B as a}from"./Button-BA9Tpm1N.js";import{M as u}from"./Modal-DNagqtOL.js";import{L as N}from"./LoadingSpinner-BZkVDNAl.js";import"./ApplicationLogo-ii1LrI5Z.js";import"./transition-BUtyYROC.js";function G({client:s}){const[i,m]=n.useState(!1),[o,r]=n.useState(!1),[h,l]=n.useState(!1),j=()=>{if(!s.answers_text){alert("ヒアリング回答が未入力です。先にクライアント情報を編集してヒアリング回答を入力してください。");return}r(!0)},p=()=>{r(!1),l(!0),x.post(t("clients.proposals.generate",s.id),{},{onSuccess:()=>{l(!1)},onError:()=>{l(!1)}})};return e.jsxs(f,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:[s.name,"様の詳細"]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(c,{href:t("clients.edit",s.id),children:e.jsx(a,{variant:"secondary",children:"編集"})}),e.jsx(a,{variant:"danger",onClick:()=>{confirm("このクライアントを削除しますか？関連する提案もすべて削除されます。")&&x.delete(t("clients.destroy",s.id))},children:"削除"})]})]}),children:[e.jsx(g,{title:`${s.name}様の詳細`}),e.jsx(u,{show:o,onClose:()=>r(!1),title:"提案生成の確認",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"提案を生成しますか？"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(a,{variant:"secondary",onClick:()=>r(!1),children:"キャンセル"}),e.jsx(a,{onClick:p,children:"生成"})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8",children:e.jsx(N,{message:"提案を生成しています..."})})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"基本情報"}),e.jsxs("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"名前"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"会社名"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.company||"-"})]})]}),s.memo&&e.jsxs("div",{className:"mt-4",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"クライアント情報・特徴"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:s.memo})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(a,{onClick:j,disabled:!s.answers_text,className:"px-8 py-3 text-lg",children:"提案生成"})}),!s.answers_text&&e.jsx("p",{className:"mt-2 text-sm text-red-600 text-center",children:"ヒアリング回答を入力してください"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ヒアリング回答"}),s.questionnaire_text&&e.jsx("button",{onClick:()=>m(!i),className:"text-sm text-blue-600 hover:text-blue-800",children:i?"質問を非表示":"送付した質問を表示"})]}),i&&s.questionnaire_text&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"送付した質問"}),e.jsx("pre",{className:"text-sm text-gray-600 whitespace-pre-wrap font-mono",children:s.questionnaire_text})]}),s.answers_text?e.jsx("div",{className:"p-4 bg-gray-50 rounded-md",children:e.jsx("pre",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.answers_text})}):e.jsx("p",{className:"text-gray-500",children:"ヒアリング回答が入力されていません。"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"提案履歴"}),s.proposals&&s.proposals.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"生成日時"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.proposals.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(d.created_at).toLocaleString("ja-JP")}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(c,{href:t("proposals.show",d.id),className:"text-blue-600 hover:text-blue-900 mr-4",children:"詳細"}),e.jsx("button",{onClick:()=>{confirm("この提案を削除してもよろしいですか？")&&x.delete(t("proposals.destroy",d.id))},className:"text-red-600 hover:text-red-900",children:"削除"})]})]},d.id))})]})}):e.jsx("p",{className:"text-gray-500",children:"提案はまだありません。"})]})})]})})})]})}export{G as default};
